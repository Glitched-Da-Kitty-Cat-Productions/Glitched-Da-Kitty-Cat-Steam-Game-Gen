<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Games List</title>
      <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="/static/styles.css">
      <script>
         let page = 1;
         function loadMoreGames() {
             fetch(`/games-list?page=${page}`)
                 .then(response => response.json())
                 .then(data => {
                     const container = document.getElementById('games-container');
                     data.games.forEach(game => {
                         const card = document.createElement('div');
                         card.className = 'card';
                         card.innerHTML = `
                             <img src="${game.header_image}" alt="${game.name}">
                             <h2>${game.name}</h2>
                             <p>${game.short_description}</p>
                             <p><strong>Price:</strong> ${game.price}</p>
                             <p><strong>Release Date:</strong> ${game.release_date}</p>
                             <a href="/game/${game.steam_id}" class="btn btn-secondary">View Details</a>
                         `;
                         container.appendChild(card);
                     });
                     page++;
                 });
         }
         window.addEventListener('scroll', () => {
             if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {
                 loadMoreGames();
             }
         });
      </script>
   </head>
   <body>
      <div class="header">
         <h1>Games List</h1>
      </div>
      <div class="container">
         <form method="POST" action="/games-list">
            <div class="search-bar">
               <input type="text" class="form-control" name="search_query" placeholder="Search for a game..." value="{{ search_query }}">
               <button type="submit" class="btn btn-primary">Search</button>
            </div>
         </form>
         <div id="games-container" class="games-grid">
            {% for game in games[:8] %}
            <div class="card">
               <img src="{{ game.header_image }}" alt="{{ game.name }}">
               <h2>{{ game.name }}</h2>
               <p>{{ game.short_description }}</p>
               <p><strong>Price:</strong> {{ game.price }}</p>
               <p><strong>Release Date:</strong> {{ game.release_date }}</p>
               <a href="/game/{{ game.steam_id }}" class="btn btn-secondary">View Details</a>
            </div>
            {% endfor %}
         </div>
      </div>
   </body>
</html>